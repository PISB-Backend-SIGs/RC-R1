<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Result</title>
    <meta name="description" content = "">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- <link rel="stylesheet" href="https://cdn.datatables.net/1.13.4/css/jquery.dataTables.min.css"> -->
    <!-- <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"> -->
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"/>
    <link rel = "stylesheet" type = "text/css" href = "https://cdn.datatables.net/1.11.5/css/jquery.dataTables.min.css"/>
</head>
<body>
    <h1>Result</h1>
    <h3>{{ marks }}</h3>
    <h4>Your rank is {{rank}}</h4>
    <table id = "table" class = "table table-bordered">
        <thead class="alert-warning">
            <tr>
                <th>Rank</th>  
                <th>User</th>  
                <th>Attempted Question</th>
                <th>Marks</th>  
                <th>remainingTime</th>
            </tr>
        </thead>
        <tbody>
        {% for userprofiles in users %}
            <tr>
                <td>{{ userprofiles.user_rank }}</td>  
                <td>{{ userprofiles.user }}</td>  
                <td>{{ userprofiles.quesno }}</td>  
                <td>{{ userprofiles.marks }}</td>  
                <td>{{ userprofiles.remainingTime }}</td>  
            </tr>
        {% endfor %}
        </tbody>
    </table>

    <a href ="{% url 'SignOut' %}">Log Out</a><br>
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src = "https://cdn.datatables.net/1.11.5/js/jquery.dataTables.min.js"></script>
    <script type = "text/javascript">
    $(document).ready(function(){
        $('#table').DataTable();
        
        $('#submit').on('click', function(){
            $firstname = $('#firstname').val();
            $lastname = $('#lastname').val();
            $address = $('#address').val();
    
            if($firstname == "" || $lastname == "" || $address == ""){
                alert("Please complete field");
            }else{
                $.ajax({
                    type: "POST",
                    url: "insert",
                    data:{
                        firstname: $firstname,
                        lastname: $lastname,
                        address: $address,
                        csrfmiddlewaretoken: $('input[name=csrfmiddlewaretoken]').val()
                    },
                    success: function(){
                        alert('Save Data');
                        $('#firstname').val('');
                        $('#lastname').val('');
                        $('#address').val('');
                        window.location = "/";
                    }
                });
            }
        });
    });
    </script>

    <script type="text/javascript">
        window.history.forward();
        function noback(){
          window.history.forward();
        }
    </script>
</body>
</html>