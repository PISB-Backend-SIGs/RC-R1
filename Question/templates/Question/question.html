<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Authentication</title>
    <meta name="description" content = "">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href = "">
</head>
<body>

    {% for message in messages %} 
    <div class = "alert alert -{{ message.tags }} alert-dismissible fade show" role = "alert">
        <strong>Message:</strong> {{ message }}
            <button type = "button" class = "close" data-dismiss = "alert" aria-label = "Close">
                <span aria-hidden = "true">Ã—</span>
            </button>
    </div>
    {% endfor %}

    <h3>QUESTION</h3>

    <h3>Question Number: {{ currquestNum }}</h3>
    <h3>Question: {{ currquest }}</h3>
    <!-- <h4>Logged in successfully. Question will be displayed here. For now question.html</h4> -->
   

    <form method="POST" action="{% url 'QuestionView1' %}" name="name1">
        {% csrf_token %}

    <p>MARKS = {{ marks }}</p>

    
    <!-- <button type="submit"><a hr    ef ="/signout">Signout</a></button><br> -->



    {% if isFirstTry%}
        <input type="number" name="res1" id="res1" required><br>
        <!-- <button type="submit">Submit<br></button><br> -->

        <input type="number" name="res2" id="res2" disabled><br>
        <button type="submit">Submit<br></button><br>

    {% else %}
        <h3>First Answer: {{resp1}}</h3>
        <!-- <input type="number" name="res1" placeholder= User_Response. id="res2" disabled><br><br> -->
        <!-- <button type="submit">Submit<br></button><br> -->

        <input type="number" name="res2" id="res2" required><br>
        <button type="submit">Submit<br></button><br>

    {% endif %}
    </form> 
    <!-- <script src="" async defer></script> -->
    <p id="timer"></p>
</body>
<script>
    document.getElementById('timer').innerHTML =
      {{min1}} + ":" + {{second1}}
    startTimer();
    
    
    function startTimer() {
      var presentTime = document.getElementById('timer').innerHTML;
      var timeArray = presentTime.split(/[:]+/);
      var m = timeArray[0];
      var s = checkSecond((timeArray[1] - 1));
      if(s==59){m=m-1}
      if(m<0){
        return
      }
      
      document.getElementById('timer').innerHTML =
        m + ":" + s;
      console.log(m)
      setTimeout(startTimer, 1000);
     
      window.onload=function(){ 
      window.setTimeout(document.name1.submit.bind(document.name1), ({{min1}}* 60 + {{second1}}) * 1000);
      };
    }
    
    function checkSecond(sec) {
      if (sec < 10 && sec >= 0) {sec = "0" + sec}; // add zero in front of numbers < 10
      if (sec < 0) {sec = "59"};
      return sec;
    }
    </script>
</html>